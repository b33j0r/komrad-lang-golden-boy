[package]
name = "komrad-web"
version = "0.1.0"
edition = "2024"

[dependencies]
komrad-parser = { path = "../komrad-parser" }
komrad-ast = { path = "../komrad-ast" }
komrad-agent = { path = "../komrad-agent" }
async-trait.workspace = true
tokio.workspace = true
tokio-util.workspace = true
tera = { version = "1.20.0", optional = true }
hyper = { version = "1.6.0", optional = true, features = ["full", "server"] }
http-body-util = { version = "0.1", optional = true, features = ["full"] }
hyper-util = { version = "0.1", optional = true, features = ["full"] }
tracing.workspace = true
tracing-subscriber.workspace = true
thiserror.workspace = true
futures.workspace = true
http = "1.3.1"
warp = { version = "0.3", features = ["websocket", "multipart", "async-compression"], optional = true }

[features]
default = ["warp", "hyper", "templates"]
templates = ["dep:tera"]
web = ["dep:http-body-util", "dep:hyper-util"]
hyper = ["dep:hyper", "web"]
warp = ["dep:warp", "web"]
