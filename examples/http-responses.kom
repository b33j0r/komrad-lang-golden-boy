agent Server {
	[http _response GET] {
		Io println "GET /"
		templates = spawn Tera {
			base_dir = "./examples/templates"
		}
		rendered = templates render "banner.html" {
		  title = "Komrad"
		}
		response set-cookie "session" "1234567890"
		response html rendered

		// ChatGPT:
		// in the pre-responses version, we returned the response
		// data by putting it as the last expr stmt here.

		// if it's clean, we should still allow that IF
		// the response object was not used.

		// if that adds a lot to the solution, defer doing this.
	}
}

[main] {
	server = spawn Server {
		templates = tera
	}
	listener = spawn HttpListener {
		host = "0.0.0.0"
		port = 9898
		delegate = server
	}
}