agent WsConnection {
	time = 0
	clients: List = []

	[ws _socket connected] {
		Io println "Connected: " + [socket.id]
	}

	[ws _socket disconnected] {
		Io println "Disconnected: " + [socket.id]
	}

	[ws _socket text _message] {

		Io println "Message: " + [socket.id] + " " + [message]
	}

	[every 2 seconds with _dt] {
		Io println "Tick: " + _dt
		me.time = me.time + _dt
	}
}

// TODO: expression precedence
// TODO: struct literals
// TODO: member access